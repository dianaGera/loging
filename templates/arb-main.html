<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="static/css/output.css" rel="stylesheet">
    <link href="static/css/main.css" rel="stylesheet">

    <!-- Font Family -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@800&display=swap" rel="stylesheet">
    <title>Document</title>
</head>

<body id='contact' class="w-screen h-screen bg-object-cover overflow-x-hidden xl:overflow-hidden"> 
    
    <div>

        <nav class="px-4 lg:px-6 py-2.5">
            <div class="flex flex-wrap justify-between items-start mx-auto max-w-screen-xl object-fit">
                <a href="#" class="flex items-center">
                    <svg  class="mr-3 h-6 sm:h-9" style="fill: rgb(30 27 75);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                        <path d="M640 264v-16c0-8.84-7.16-16-16-16H344v-40h72c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H224c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h72v40H16c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h104v40H64c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h160c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32h-56v-40h304v40h-56c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h160c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32h-56v-40h104c8.84 0 16-7.16 16-16zM256 128V64h128v64H256zm-64 320H96v-64h96v64zm352 0h-96v-64h96v64z"/>
                    </svg>
                </a>
            <div>
            
            <div class="relative inline-block group">
                <div class="flex flex-wrap justify-end items-start mx-auto max-w-screen-xl">
                    <button id="lang-options" class="flex items-center focus:outline-none">
                        <img src="../static/img/ua.jpg" class="mr-3 w-9 h-9 object-fit rounded-full shadow-lg" />
                    </button>
                </div>
                
                <!-- Lang Options -->
                <div id="lang-dropdown" class="right-0 mt-2 absolute z-10 hidden" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
                    <div class="py-2">
                    <img onclick="console.log('EN works')" src="../static/img/en.png" class="mt-2 mr-3 w-9 h-9 object-fit rounded-full shadow-lg hover:brightness-75" />
                    <img onclick="console.log('GE works')" src="../static/img/ge.png" class="mt-2 mr-3 w-9 h-9 object-fit rounded-full shadow-lg hover:brightness-75" />
                    <img onclick="console.log('UA works')" src="../static/img/ua.jpg" class="mt-2 mr-3 w-9 h-9 object-fit rounded-full shadow-lg hover:brightness-75" />
                    <img onclick="console.log('RU works')" src="../static/img/ru.png" class="mt-2 mr-3 w-9 h-9 object-fit rounded-full shadow-lg hover:brightness-75" />
                    </div>
                </div>
            </div>
        </nav>

        <div class="flex justify-center gap-2 p-4 bg-bottom md:items-center">
            <div id='form' class="hidden h-fit p-6 m-6 bg-white rounded-2xl shadow dark:bg-gray-700 md:p-12 xl:block">{% block form %} {% endblock %}</div>
            <div id='details' class="text-blue-950 md:p-6 md:m-6 ">{% include 'arb-details.html' %}</div>
        </div>

        {% include 'arb-modal.html' %}
    </div>

</body>

<script>
    const langButton = document.getElementById('lang-options');
    const langDropdown = document.getElementById('lang-dropdown');
  
    langButton.addEventListener('click', () => {
      langDropdown.classList.toggle('hidden');
    });


    function openForm() {
        const form = document.getElementById('form');   
        const details = document.getElementById('details'); 
        const showDesc = document.getElementById('showDesc'); 
        form.style.display = 'block'
        details.style.display = 'none'
        showDesc.style.display = 'block'
    }

    function showDesc() {
        const form = document.getElementById('form');   
        const details = document.getElementById('details'); 
        const showDesc = document.getElementById('showDesc'); 
        form.style.display = 'none'
        details.style.display = 'block'
    }

    var inputs = document.querySelectorAll('input[type="text"]');
    var submitButton = document.getElementById('applyFormBtn');

    inputs.forEach(function(input) {
        input.addEventListener('input', function() {
            var isFilled = true;
            
            inputs.forEach(function(input) {
                if (input.value.trim() === '') {
                    isFilled = false;
                }
            });
            console.log(isFilled)
            if (isFilled) {
                submitButton.removeAttribute('disabled');
            } else {
                submitButton.setAttribute('disabled', 'disabled');
            }
        });
    });

    function applyForm() {
        var inputs = document.querySelectorAll('input[type="text"]');
        var res = {}
        for (let input of inputs) {
            res[input.name] = input.value
        }
        $.ajax ({
            type: 'POST',
            url: '/',
            contentType: "application/json",
            dataType: 'json',
            data: JSON.stringify(res),
            success: function(data) {
                if (data) {
                    // Validation failed
                    errorEl = document.getElementById('errorMessage');
                    errorEl.innerHTML = data['message'];
                    errorEl.style.display = 'block';
                } else {
                    // All done!
                    document.getElementById('applyForm').style.display = 'block'
                }
                console.log(data)   
            },
            error: function() {
                alert('Unelectable error occurred. Try later')
            }
        })
    }
</script>
<script src="https://unpkg.com/flowbite@1.4.4/dist/flowbite.js"></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'></script>`
</html>